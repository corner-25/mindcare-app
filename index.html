<!DOCTYPE html>
<html lang="vi">
<head>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.12/dist/lunar.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare - ChƒÉm s√≥c tinh th·∫ßn</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #e0f2fe 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .app {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ffffff 0%, #e0f2fe 100%);
            padding: 30px 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            color: #333;
            margin-bottom: 8px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        /* Logo */
        .logo {
            display: inline-block;
            height: 30px;
            width: auto;
            margin: 0 8px 0 0;
        }

        /* Brand row */
        .brand {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .header .brand h1 {
            margin: 0;
        }

        .content {
            padding: 30px 20px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Home Screen */
        .welcome {
            text-align: center;
            margin-bottom: 30px;
        }

        .welcome h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 20px;
        }

        .welcome p {
            color: #666;
            font-size: 14px;
        }

        .features {
            display: grid;
            gap: 15px;
        }

        .feature {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .feature:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .feature-icon {
            font-size: 30px;
            margin-bottom: 10px;
            display: block;
        }

        .feature h3 {
            color: #333;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .feature p {
            color: #666;
            font-size: 13px;
            line-height: 1.4;
        }

        /* Mood Tracker */
        .mood-section {
            margin: 20px 0;
        }

        .mood-section h3 {
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .mood-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(90deg, #ff6b6b, #ffa726, #66bb6a);
            outline: none;
            margin: 20px 0;
        }

        .mood-slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 3px solid #667eea;
            cursor: pointer;
        }

        .mood-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
        }

        .mood-display {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin: 15px 0;
        }

        .mood-emoji {
            font-size: 50px;
            margin: 10px 0;
        }

        /* Breathing Exercise */
        .breathing {
            text-align: center;
            padding: 20px 0;
        }

        .breathing-circle {
            width: 150px;
            height: 150px;
            border: 3px solid #667eea;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            color: #667eea;
            transition: all 0.5s ease;
        }

        .breathing-circle.inhale {
            transform: scale(1.3);
            background: rgba(102, 126, 234, 0.1);
        }

        .breathing-circle.exhale {
            transform: scale(0.7);
            background: rgba(102, 126, 234, 0.05);
        }

        .breathing-instruction {
            font-size: 18px;
            color: #667eea;
            margin: 20px 0;
            min-height: 25px;
        }

        /* Quick Tips */
        .tips {
            margin: 20px 0;
        }

        .tip {
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            padding: 15px;
            border-radius: 12px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .tip h4 {
            color: #333;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .tip p {
            color: #666;
            font-size: 13px;
            line-height: 1.4;
        }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin: 10px 0;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-small {
            width: auto;
            padding: 8px 15px;
            font-size: 12px;
            display: inline-block;
            margin: 5px;
        }

        /* Back button */
        .back-btn {
            background: #e2e8f0;
            color: #4a5568;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            margin-bottom: 20px;
        }

        .back-btn:hover {
            background: #cbd5e0;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .app {
                margin: 0;
                border-radius: 0;
                min-height: 100vh;
            }
            
            body {
                padding: 0;
            }
        }

        /* Simple animations */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .support-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid #f59e0b;
        }

        .support-box h3 {
            color: #92400e;
            margin-bottom: 10px;
        }

        .support-box p {
            color: #a16207;
            font-size: 14px;
            margin: 5px 0;
        }

        .hotline {
            font-size: 18px;
            font-weight: bold;
            color: #dc2626;
            margin: 10px 0;
        }

        .activity-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .activity-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .activity-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .activity-icon {
            font-size: 30px;
            margin-bottom: 10px;
        }

        .activity-card h4 {
            color: #333;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .activity-card p {
            color: #666;
            font-size: 12px;
            line-height: 1.3;
        }

        .activity-detail {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #f0f9ff, #ecfdf5);
            border-radius: 16px;
            text-align: center;
        }

        .activity-content h4 {
            color: #1e40af;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .activity-timer {
            margin: 20px 0;
        }

        .timer-display {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
            margin: 15px 0;
        }

        /* Mindfulness Styles */
        .mindfulness-selector {
            margin: 20px 0;
        }

        .mindfulness-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
        }

        .mindfulness-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .mindfulness-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }

        .mindfulness-card h4 {
            color: #333;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .mindfulness-card p {
            color: #666;
            font-size: 13px;
            line-height: 1.4;
        }

        .mindfulness-practice {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 16px;
            text-align: center;
        }

        .mindfulness-circle {
            width: 120px;
            height: 120px;
            border: 3px solid #667eea;
            border-radius: 50%;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s ease;
        }

        .mindfulness-circle.active {
            transform: scale(1.1);
            background: rgba(102, 126, 234, 0.1);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .mindfulness-instruction {
            font-size: 16px;
            color: #1e40af;
            margin: 20px 0;
            line-height: 1.5;
            min-height: 50px;
        }

        .guide-description {
            background: #f0f9ff;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 14px;
            color: #1e40af;
            line-height: 1.5;
        }

        .guide-section {
            margin: 20px 0;
            text-align: left;
        }

        .guide-section h5 {
            color: #333;
            font-size: 15px;
            margin-bottom: 10px;
        }

        .guide-section ul, .guide-section ol {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
            padding-left: 20px;
        }

        .guide-section li {
            margin: 8px 0;
        }

        .guide-controls {
            margin-top: 30px;
            text-align: center;
        }

        .mindfulness-session {
            text-align: center;
        }

        .progress {
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s ease;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            text-align: center;
        }

        .stat {
            flex: 1;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        .date-display {
            margin: 15px 0;
            padding: 12px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .solar-date {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .lunar-date {
            font-size: 13px;
            color: #666;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <div class="brand">
                <img src="logo.png" alt="MindCare logo" class="logo" loading="lazy">
                <h1>MindCare</h1>
            </div>
            <p>ChƒÉm s√≥c s·ª©c kho·∫ª tinh th·∫ßn ƒë∆°n gi·∫£n</p>
        </div>

        <div class="content">
            <!-- Home Screen -->
            <div class="screen active" id="home">
                <div class="welcome">
                    <h2>Xin ch√†o! üëã</h2>
                    <div class="date-display">
                        <div class="solar-date" id="solarDate"></div>
                        <div class="lunar-date" id="lunarDate"></div>
                    </div>
                    <p>H√¥m nay b·∫°n c·∫£m th·∫•y th·∫ø n√†o?</p>
                </div>

                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="moodCount">0</div>
                        <div class="stat-label">Check-ins</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="lastMood">üòä</div>
                        <div class="stat-label">Mood g·∫ßn nh·∫•t</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="breathCount">0</div>
                        <div class="stat-label">L·∫ßn th·ªü</div>
                    </div>
                </div>

                <div class="features">
                    <div class="feature" onclick="showScreen('mood')">
                        <span class="feature-icon">üí≠</span>
                        <h3>Check-in C·∫£m X√∫c</h3>
                        <p>ƒê√°nh gi√° t√¢m tr·∫°ng h√¥m nay</p>
                    </div>

                    <div class="feature" onclick="showScreen('breathing')">
                        <span class="feature-icon">ü´Å</span>
                        <h3>Th·ªü Th∆∞ Gi√£n</h3>
                        <p>B√†i t·∫≠p th·ªü gi·∫£m cƒÉng th·∫≥ng</p>
                    </div>

                    <div class="feature" onclick="showScreen('activities')">
                        <span class="feature-icon">üèÉ</span>
                        <h3>Ho·∫°t ƒê·ªông 5 Ph√∫t</h3>
                        <p>G·ª£i √Ω vi·ªác nh·ªè c·∫£i thi·ªán mood</p>
                    </div>

                    <div class="feature" onclick="showScreen('mindfulness')">
                        <span class="feature-icon">üßò</span>
                        <h3>Mindfulness Mini</h3>
                        <p>B√†i t·∫≠p ch√°nh ni·ªám ng·∫Øn 1-2 ph√∫t</p>
                    </div>

                    <div class="feature" onclick="showScreen('tips')">
                        <span class="feature-icon">üí°</span>
                        <h3>M·∫πo H·ªØu √çch</h3>
                        <p>L·ªùi khuy√™n chƒÉm s√≥c tinh th·∫ßn</p>
                    </div>

                    <div class="feature" onclick="showScreen('support')">
                        <span class="feature-icon">ü§ù</span>
                        <h3>H·ªó Tr·ª£ Kh·∫©n C·∫•p</h3>
                        <p>Li√™n h·ªá khi c·∫ßn gi√∫p ƒë·ª°</p>
                    </div>
                </div>
            </div>

            <!-- Mood Screen -->
            <div class="screen" id="mood">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Quay l·∫°i</button>
                
                <div class="mood-section">
                    <h3>B·∫°n c·∫£m th·∫•y th·∫ø n√†o h√¥m nay?</h3>
                    
                    <div class="mood-emoji" id="moodEmoji">üòê</div>
                    <div class="mood-display" id="moodText">B√¨nh th∆∞·ªùng</div>
                    
                    <input type="range" min="1" max="5" value="3" class="mood-slider" id="moodSlider">
                    <div class="mood-labels">
                        <span>üò¢ Bu·ªìn</span>
                        <span>üòä Vui</span>
                    </div>
                    
                    <button class="btn" onclick="saveMood()">L∆∞u C·∫£m X√∫c</button>
                </div>
            </div>

            <!-- Breathing Screen -->
            <!-- Breathing Screen -->
            <div class="screen" id="breathing">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Quay l·∫°i</button>
                
                <div class="breathing">
                    <h3>B√†i T·∫≠p Th·ªü Th∆∞ Gi√£n ü´Å</h3>
                    
                    <div class="guide-description">
                        <strong>K·ªπ thu·∫≠t th·ªü 4-4-4:</strong> H√≠t v√†o 4 gi√¢y ‚Üí Gi·ªØ 4 gi√¢y ‚Üí Th·ªü ra 4 gi√¢y
                    </div>
                    
                    <div class="guide-section">
                        <h5>üéØ L·ª£i √≠ch c·ªßa b√†i t·∫≠p th·ªü:</h5>
                        <ul style="font-size: 13px; color: #666; line-height: 1.5;">
                            <li>Gi·∫£m stress v√† lo √¢u ngay l·∫≠p t·ª©c</li>
                            <li>L√†m ch·∫≠m nh·ªãp tim, h·∫° huy·∫øt √°p</li>
                            <li>C·∫£i thi·ªán gi·∫•c ng·ªß v√† t·∫≠p trung</li>
                            <li>K√≠ch ho·∫°t h·ªá th·∫ßn kinh ph√≥ giao c·∫£m (th∆∞ gi√£n)</li>
                        </ul>
                    </div>
                    
                    <div class="guide-section">
                        <h5>üìã C√°ch th·ª±c hi·ªán:</h5>
                        <ol style="font-size: 13px; color: #666; line-height: 1.5;">
                            <li>Ng·ªìi th·∫≥ng l∆∞ng, th·∫£ l·ªèng vai</li>
                            <li>ƒê·∫∑t m·ªôt tay l√™n ng·ª±c, m·ªôt tay l√™n b·ª•ng</li>
                            <li>Th·ªü b·∫±ng m≈©i, ƒë·ªÉ b·ª•ng n·ªü ra (kh√¥ng ng·ª±c)</li>
                            <li>Theo d√µi v√≤ng tr√≤n v√† h∆∞·ªõng d·∫´n</li>
                            <li>Th·ª±c hi·ªán √≠t nh·∫•t 5-10 chu k·ª≥ th·ªü</li>
                        </ol>
                    </div>
                    
                    <div class="breathing-circle" id="breathingCircle">
                        <span>S·∫µn s√†ng</span>
                    </div>
                    
                    <div class="breathing-instruction" id="breathingText">Nh·∫•n b·∫Øt ƒë·∫ßu ƒë·ªÉ th·ª±c h√†nh</div>
                    
                    <button class="btn" id="breathingBtn" onclick="startBreathing()">B·∫Øt ƒê·∫ßu</button>
                </div>
            </div>

            <!-- 5-Minute Activities Screen -->
            <div class="screen" id="activities">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Quay l·∫°i</button>
                
                <div class="activities">
                    <h3>Ho·∫°t ƒê·ªông 5 Ph√∫t üèÉ</h3>
                    <p style="color: #666; font-size: 14px; margin: 10px 0;">Ch·ªçn m·ªôt ho·∫°t ƒë·ªông nhanh ƒë·ªÉ c·∫£i thi·ªán t√¢m tr·∫°ng:</p>
                    
                    <div class="activity-grid">
                        <div class="activity-card" onclick="startActivity('stretch')">
                            <div class="activity-icon">ü§∏</div>
                            <h4>Gi√£n C∆°</h4>
                            <p>C√°c ƒë·ªông t√°c gi√£n c∆° ƒë∆°n gi·∫£n</p>
                        </div>
                        
                        <div class="activity-card" onclick="startActivity('walk')">
                            <div class="activity-icon">üö∂</div>
                            <h4>ƒêi B·ªô</h4>
                            <p>Ra ngo√†i h√≠t th·ªü kh√¥ng kh√≠ trong l√†nh</p>
                        </div>
                        
                        <div class="activity-card" onclick="startActivity('water')">
                            <div class="activity-icon">üíß</div>
                            <h4>U·ªëng N∆∞·ªõc</h4>
                            <p>B·ªï sung n∆∞·ªõc v√† ƒÉn nh·∫π l√†nh m·∫°nh</p>
                        </div>
                        
                        <div class="activity-card" onclick="startActivity('music')">
                            <div class="activity-icon">üéµ</div>
                            <h4>Nghe Nh·∫°c</h4>
                            <p>Ph√°t nh·∫°c y√™u th√≠ch v√† th∆∞ gi√£n</p>
                        </div>
                        
                        <div class="activity-card" onclick="startActivity('tidy')">
                            <div class="activity-icon">üßπ</div>
                            <h4>D·ªçn D·∫πp</h4>
                            <p>S·∫Øp x·∫øp kh√¥ng gian xung quanh</p>
                        </div>
                        
                        <div class="activity-card" onclick="startActivity('call')">
                            <div class="activity-icon">üìû</div>
                            <h4>G·ªçi ƒêi·ªán</h4>
                            <p>Li√™n l·∫°c v·ªõi ng∆∞·ªùi th√¢n y√™u</p>
                        </div>
                    </div>
                    
                    <div class="activity-detail" id="activityDetail" style="display: none;">
                        <div class="activity-content">
                            <h4 id="activityTitle"></h4>
                            <div id="activityInstructions"></div>
                            <div class="activity-timer">
                                <div class="timer-display" id="activityTimer">5:00</div>
                                <button class="btn" id="activityBtn" onclick="startActivityTimer()">B·∫Øt ƒê·∫ßu</button>
                                <button class="btn btn-secondary" onclick="completeActivity()">Ho√†n Th√†nh</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mindfulness Mini Screen -->
            <div class="screen" id="mindfulness">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Quay l·∫°i</button>
                
                <div class="mindfulness">
                    <h3>Mindfulness Mini üßò</h3>
                    <p style="color: #666; font-size: 14px; margin: 10px 0;">B√†i t·∫≠p ch√°nh ni·ªám ng·∫Øn ƒë·ªÉ t·∫≠p trung v√† th∆∞ gi√£n:</p>
                    
                    <div class="mindfulness-selector">
                        <div class="mindfulness-card" onclick="startMindfulness('breath')">
                            <div class="mindfulness-icon">ü´Å</div>
                            <h4>Quan S√°t H∆°i Th·ªü</h4>
                            <p>T·∫≠p trung v√†o nh·ªãp th·ªü t·ª± nhi√™n (2 ph√∫t)</p>
                        </div>
                        
                        <div class="mindfulness-card" onclick="startMindfulness('body')">
                            <div class="mindfulness-icon">üßç</div>
                            <h4>Qu√©t C∆° Th·ªÉ</h4>
                            <p>C·∫£m nh·∫≠n t·ª´ng b·ªô ph·∫≠n c∆° th·ªÉ (2 ph√∫t)</p>
                        </div>
                        
                        <div class="mindfulness-card" onclick="startMindfulness('senses')">
                            <div class="mindfulness-icon">üëÅÔ∏è</div>
                            <h4>5-4-3-2-1</h4>
                            <p>K·ªπ thu·∫≠t 5 gi√°c quan (1 ph√∫t)</p>
                        </div>
                        
                        <div class="mindfulness-card" onclick="startMindfulness('gratitude')">
                            <div class="mindfulness-icon">üôè</div>
                            <h4>Bi·∫øt ∆†n</h4>
                            <p>Nghƒ© v·ªÅ nh·ªØng ƒëi·ªÅu t√≠ch c·ª±c (1 ph√∫t)</p>
                        </div>
                    </div>
                    
                    <div class="mindfulness-practice" id="mindfulnessPractice" style="display: none;">
                        <!-- Guide Screen -->
                        <div class="mindfulness-guide" id="mindfulnessGuide">
                            <h4 id="guideTitle"></h4>
                            <div class="guide-description" id="guideDescription"></div>
                            
                            <div class="guide-section">
                                <h5>üéØ L·ª£i √≠ch:</h5>
                                <ul id="guideBenefits"></ul>
                            </div>
                            
                            <div class="guide-section">
                                <h5>üìã C√°ch th·ª±c hi·ªán:</h5>
                                <ol id="guideSteps"></ol>
                            </div>
                            
                            <div class="guide-controls">
                                <button class="btn" onclick="startMindfulnessPractice()">B·∫Øt ƒê·∫ßu Th·ª±c H√†nh</button>
                                <button class="btn btn-secondary" onclick="backToMindfulnessMenu()">Quay L·∫°i</button>
                            </div>
                        </div>
                        
                        <!-- Practice Screen -->
                        <div class="mindfulness-session" id="mindfulnessSession" style="display: none;">
                            <h4 id="sessionTitle"></h4>
                            <div class="mindfulness-circle" id="mindfulnessCircle">
                                <div class="timer-display" id="mindfulnessTimer">2:00</div>
                            </div>
                            <div class="mindfulness-instruction" id="mindfulnessInstruction"></div>
                            <div class="mindfulness-controls">
                                <button class="btn" id="mindfulnessBtn" onclick="startMindfulnessTimer()">B·∫Øt ƒê·∫ßu</button>
                                <button class="btn btn-secondary" onclick="endMindfulness()">K·∫øt Th√∫c</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tips Screen -->
            <div class="screen" id="tips">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Quay l·∫°i</button>
                
                <div class="tips">
                    <h3>M·∫πo ChƒÉm S√≥c Tinh Th·∫ßn üí°</h3>
                    
                    <div class="tip">
                        <h4>üåÖ B·∫Øt ƒë·∫ßu ng√†y t√≠ch c·ª±c</h4>
                        <p>D√†nh 5 ph√∫t m·ªói s√°ng ƒë·ªÉ suy nghƒ© v·ªÅ 3 ƒëi·ªÅu b·∫°n bi·∫øt ∆°n.</p>
                    </div>
                    
                    <div class="tip">
                        <h4>üö∂ V·∫≠n ƒë·ªông nh·∫π nh√†ng</h4>
                        <p>ƒêi b·ªô 10-15 ph√∫t gi√∫p c·∫£i thi·ªán t√¢m tr·∫°ng v√† gi·∫£m cƒÉng th·∫≥ng.</p>
                    </div>
                    
                    <div class="tip">
                        <h4>üì± Gi·ªõi h·∫°n m·∫°ng x√£ h·ªôi</h4>
                        <p>Tr√°nh l∆∞·ªõt ƒëi·ªán tho·∫°i tr∆∞·ªõc khi ng·ªß √≠t nh·∫•t 1 ti·∫øng.</p>
                    </div>
                    
                    <div class="tip">
                        <h4>ü´Ç K·∫øt n·ªëi v·ªõi ng∆∞·ªùi kh√°c</h4>
                        <p>G·ªçi ƒëi·ªán ho·∫∑c nh·∫Øn tin v·ªõi b·∫°n b√®, gia ƒë√¨nh √≠t nh·∫•t m·ªói ng√†y.</p>
                    </div>
                    
                    <div class="tip">
                        <h4>üò¥ Ng·ªß ƒë·ªß gi·∫•c</h4>
                        <p>7-9 ti·∫øng ng·ªß m·ªói ƒë√™m ƒë·ªÉ n√£o b·ªô v√† c∆° th·ªÉ c√≥ th·ªÉ ph·ª•c h·ªìi.</p>
                    </div>
                    
                    <div class="tip">
                        <h4>üßò Th·ª±c h√†nh ch√°nh ni·ªám</h4>
                        <p>D√†nh v√†i ph√∫t m·ªói ng√†y ƒë·ªÉ t·∫≠p trung v√†o h∆°i th·ªü v√† c·∫£m nh·∫≠n hi·ªán t·∫°i.</p>
                    </div>
                </div>
            </div>

            <!-- Support Screen -->
            <div class="screen" id="support">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Quay l·∫°i</button>
                
                <div class="support-box">
                  <h3>ü§ù H·ªó Tr·ª£ Kh·∫©n C·∫•p</h3>
                  <p>N·∫øu b·∫°n ƒëang c√≥ suy nghƒ© t·ª± l√†m h·∫°i b·∫£n th√¢n ho·∫∑c c√≥ nguy c∆° kh·∫©n c·∫•p:</p>
                  <div class="hotline">üìû 115 (C·∫•p c·ª©u Y t·∫ø to√†n qu·ªëc)</div>
                  <div class="hotline">üìû 1900 2827</div>
                  <div class="hotline">üìû 1900 6923</div>
                  <p style="font-size:13px; color:#6b7280; margin-top:8px;">B·ªánh vi·ªán ƒê·∫°i h·ªçc Y D∆∞·ª£c TP. H·ªì Ch√≠ Minh: 215 H·ªìng B√†ng, Ph∆∞·ªùng Ch·ª£ L·ªõn, TP. H·ªì Ch√≠ Minh ¬∑ Website: www.bvdaihoc.com.vn</p>
                </div>
                
                <div class="tip">
                    <h4>üè• Khi n√†o n√™n t√¨m chuy√™n gia?</h4>
                    <p>‚Ä¢ C·∫£m th·∫•y bu·ªìn, lo √¢u k√©o d√†i h∆°n 2 tu·∫ßn<br>
                       ‚Ä¢ M·∫•t kh·∫£ nƒÉng l√†m vi·ªác, sinh ho·∫°t b√¨nh th∆∞·ªùng<br>
                       ‚Ä¢ C√≥ suy nghƒ© t·ª± l√†m h·∫°i b·∫£n th√¢n<br>
                       ‚Ä¢ Thay ƒë·ªïi h√†nh vi b·∫•t th∆∞·ªùng</p>
                </div>
                
                <div class="tip">
                    <h4>üåê Ngu·ªìn h·ªó tr·ª£ tr·ª±c tuy·∫øn</h4>
                    <p>‚Ä¢ Trang web ch√≠nh th·ª©c BV ƒêHYD TPHCM: <strong>www.bvdaihoc.com.vn</strong><br>
                       ‚Ä¢ ƒê·∫∑t l·ªãch kh√°m: ·ª®ng d·ª•ng ‚ÄúUMC Care‚Äù</p>
                </div>

                <div style="background: #f0f9ff; padding: 15px; border-radius: 12px; margin: 20px 0; border-left: 4px solid #3b82f6;">
                    <p style="color: #1e40af; font-size: 13px; line-height: 1.5;">
                        <strong>L∆∞u √Ω:</strong> ·ª®ng d·ª•ng n√†y ch·ªâ mang t√≠nh ch·∫•t h·ªó tr·ª£ v√† kh√¥ng thay th·∫ø cho vi·ªác ƒëi·ªÅu tr·ªã y t·∫ø chuy√™n nghi·ªáp. 
                        Khi c√≥ v·∫•n ƒë·ªÅ nghi√™m tr·ªçng, h√£y t√¨m ki·∫øm s·ª± gi√∫p ƒë·ª° t·ª´ chuy√™n gia.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // App State
        let appData = {
            moods: [],
            breathingSessions: 0,
            activitiesCompleted: 0,
            mindfulnessCompleted: 0,
            daysUsed: new Set(),
            firstVisit: null
        };

        // Load data from memory
        function loadData() {
            updateDateDisplay();
            updateStats();
        }

        // Update home screen stats
        function updateStats() {
            // Hi·ªÉn th·ªã s·ªë l·∫ßn check-in mood
            document.getElementById('moodCount').textContent = appData.moods.length || 0;
            
            // Hi·ªÉn th·ªã s·ªë l·∫ßn th·ªü
            document.getElementById('breathCount').textContent = appData.breathingSessions || 0;
            
            // Hi·ªÉn th·ªã mood g·∫ßn nh·∫•t
            if (appData.moods.length > 0) {
                const lastMood = appData.moods[appData.moods.length - 1];
                const moodEmojis = ['üò¢', 'üòü', 'üòê', 'üòä', 'üòÅ'];
                document.getElementById('lastMood').textContent = moodEmojis[lastMood - 1];
            } else {
                document.getElementById('lastMood').textContent = 'üòê';
            }
        }

        // Screen navigation
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // Mood tracking
        const moodSlider = document.getElementById('moodSlider');
        const moodEmoji = document.getElementById('moodEmoji');
        const moodText = document.getElementById('moodText');

        const moodData = {
            1: { emoji: 'üò¢', text: 'R·∫•t bu·ªìn' },
            2: { emoji: 'üòü', text: 'Bu·ªìn' },
            3: { emoji: 'üòê', text: 'B√¨nh th∆∞·ªùng' },
            4: { emoji: 'üòä', text: 'Vui' },
            5: { emoji: 'üòÅ', text: 'R·∫•t vui' }
        };

        if (moodSlider) {
            moodSlider.addEventListener('input', function() {
                const value = this.value;
                moodEmoji.textContent = moodData[value].emoji;
                moodText.textContent = moodData[value].text;
            });
        }

        function saveMood() {
            const mood = parseInt(moodSlider.value);
            appData.moods.push(mood);
            updateStats();
            
            // Show mood-specific advice
            showMoodAdvice(mood);
        }
        function showMoodAdvice(mood) {
            const moodAdvice = {
                1: {
                    title: "T√¥i hi·ªÉu b·∫°n ƒëang kh√≥ khƒÉn üíô",
                    message: "C·∫£m x√∫c n√†y s·∫Ω qua ƒëi. H√£y th·ª≠:\n‚Ä¢ G·ªçi ƒëi·ªán cho ai ƒë√≥ b·∫°n tin t∆∞·ªüng\n‚Ä¢ Vi·∫øt ra nh·ªØng g√¨ b·∫°n c·∫£m th·∫•y\n‚Ä¢ ƒêi d·∫°o ng·∫Øn ho·∫∑c nghe nh·∫°c √™m d·ªãu\n‚Ä¢ Nh·ªõ r·∫±ng b·∫°n kh√¥ng ƒë∆°n ƒë·ªôc"
                },
                2: {
                    title: "H√¥m nay h∆°i kh√≥ khƒÉn nh·ªâ ü§ó",
                    message: "Nh·ªØng ng√†y nh∆∞ th·∫ø n√†y l√† b√¨nh th∆∞·ªùng. H√£y:\n‚Ä¢ Cho ph√©p b·∫£n th√¢n c·∫£m th·∫•y bu·ªìn\n‚Ä¢ L√†m m·ªôt vi·ªác nh·ªè mang l·∫°i ni·ªÅm vui\n‚Ä¢ U·ªëng tr√† ·∫•m v√† ngh·ªâ ng∆°i\n‚Ä¢ Nh·∫Øc nh·ªü b·∫£n th√¢n v·ªÅ nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp"
                },
                3: {
                    title: "M·ªôt ng√†y b√¨nh th∆∞·ªùng üòå",
                    message: "·ªîn ƒë·ªãnh c≈©ng l√† m·ªôt ƒëi·ªÅu tuy·ªát v·ªùi! H√£y:\n‚Ä¢ Bi·∫øt ∆°n s·ª± y√™n b√¨nh n√†y\n‚Ä¢ L√†m ƒëi·ªÅu g√¨ ƒë√≥ t·ªët cho b·∫£n th√¢n\n‚Ä¢ K·∫øt n·ªëi v·ªõi b·∫°n b√® ho·∫∑c gia ƒë√¨nh\n‚Ä¢ Chu·∫©n b·ªã cho m·ªôt ng√†y mai t·ªët h∆°n"
                },
                4: {
                    title: "T√¢m tr·∫°ng t√≠ch c·ª±c! üòä",
                    message: "Th·∫≠t tuy·ªát! H√£y t·∫≠n h∆∞·ªüng c·∫£m gi√°c n√†y:\n‚Ä¢ Chia s·∫ª ni·ªÅm vui v·ªõi ng∆∞·ªùi kh√°c\n‚Ä¢ L√†m ƒëi·ªÅu g√¨ ƒë√≥ s√°ng t·∫°o\n‚Ä¢ Ghi l·∫°i kho·∫£nh kh·∫Øc ƒë·∫πp n√†y\n‚Ä¢ Lan t·ªèa nƒÉng l∆∞·ª£ng t√≠ch c·ª±c"
                },
                5: {
                    title: "B·∫°n ƒëang r·∫°ng r·ª°! üåü",
                    message: "NƒÉng l∆∞·ª£ng tuy·ªát v·ªùi! H√£y:\n‚Ä¢ T·∫≠n d·ª•ng ƒë·ªÉ l√†m nh·ªØng vi·ªác quan tr·ªçng\n‚Ä¢ Gi√∫p ƒë·ª° ai ƒë√≥ kh√°c\n‚Ä¢ L·∫≠p k·∫ø ho·∫°ch cho nh·ªØng ƒëi·ªÅu th√∫ v·ªã\n‚Ä¢ Nh·ªõ r·∫±ng b·∫°n x·ª©ng ƒë√°ng v·ªõi h·∫°nh ph√∫c n√†y"
                }
            };

            const advice = moodAdvice[mood];
            
            // Create and show popup
            const popup = document.createElement('div');
            popup.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center;">
                    <div style="background: white; padding: 30px; border-radius: 20px; max-width: 350px; margin: 20px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                        <h3 style="color: #333; margin-bottom: 15px; font-size: 18px;">${advice.title}</h3>
                        <p style="color: #666; line-height: 1.6; white-space: pre-line; font-size: 14px; margin-bottom: 20px;">${advice.message}</p>
                        <button onclick="closeMoodAdvice()" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 12px 25px; border-radius: 25px; font-size: 14px; font-weight: 600; cursor: pointer;">C·∫£m ∆°n!</button>
                    </div>
                </div>
            `;
            document.body.appendChild(popup);
        }

        function closeMoodAdvice() {
            const popup = document.querySelector('[style*="position: fixed"]').parentElement;
            document.body.removeChild(popup);
            
            // Show success message and return to home
            const btn = document.querySelector('#mood .btn');
            const originalText = btn.textContent;
            btn.textContent = '‚úÖ ƒê√£ l∆∞u!';
            btn.style.background = '#22c55e';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '';
                showScreen('home');
            }, 1500);
        }

        // Breathing exercise
        let breathingActive = false;
        let breathingTimeout;

        function startBreathing() {
            const btn = document.getElementById('breathingBtn');
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');

            if (!breathingActive) {
                breathingActive = true;
                btn.textContent = 'D·ª´ng';
                runBreathingCycle();
            } else {
                stopBreathing();
            }
        }

        function stopBreathing() {
            breathingActive = false;
            clearTimeout(breathingTimeout);
            
            // Count completed breathing session
            if (appData.breathingSessions !== undefined) {
                appData.breathingSessions++;
                updateStats();
            }
            
            const btn = document.getElementById('breathingBtn');
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            
            btn.textContent = 'B·∫Øt ƒê·∫ßu';
            circle.className = 'breathing-circle';
            circle.innerHTML = '<span>S·∫µn s√†ng</span>';
            text.textContent = 'Nh·∫•n b·∫Øt ƒë·∫ßu ƒë·ªÉ th·ª±c h√†nh';
        }

        function runBreathingCycle() {
            if (!breathingActive) return;

            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            
            // Inhale phase
            text.textContent = 'H√≠t v√†o...';
            circle.className = 'breathing-circle inhale';
            circle.innerHTML = '<span>H√≠t v√†o</span>';
            
            breathingTimeout = setTimeout(() => {
                if (!breathingActive) return;
                
                // Hold phase
                text.textContent = 'Gi·ªØ...';
                circle.className = 'breathing-circle';
                circle.innerHTML = '<span>Gi·ªØ</span>';
                
                breathingTimeout = setTimeout(() => {
                    if (!breathingActive) return;
                    
                    // Exhale phase
                    text.textContent = 'Th·ªü ra...';
                    circle.className = 'breathing-circle exhale';
                    circle.innerHTML = '<span>Th·ªü ra</span>';
                    
                    breathingTimeout = setTimeout(() => {
                        if (breathingActive) {
                            runBreathingCycle();
                        }
                    }, 4000);
                }, 4000);
            }, 4000);
        }

        // 5-Minute Activities
        const activities = {
            stretch: {
                title: "Gi√£n C∆° ü§∏",
                instructions: [
                    "Xoay c·ªï nh·∫π nh√†ng 5 l·∫ßn m·ªói h∆∞·ªõng",
                    "Gi∆° tay l√™n cao, du·ªói th·∫≥ng 10 gi√¢y",
                    "C√∫i ng∆∞·ªùi v·ªÅ ph√≠a tr∆∞·ªõc, th·∫£ l·ªèng",
                    "Xoay vai 10 l·∫ßn v·ªÅ sau",
                    "Du·ªói ch√¢n, xoay c·ªï ch√¢n"
                ]
            },
            walk: {
                title: "ƒêi B·ªô üö∂",
                instructions: [
                    "Ra ngo√†i ho·∫∑c ƒëi b·ªô trong nh√†",
                    "B∆∞·ªõc ch·∫≠m r√£i, t·∫≠p trung v√†o t·ª´ng b∆∞·ªõc",
                    "Quan s√°t xung quanh b·∫°n",
                    "H√≠t th·ªü s√¢u khi ƒëi",
                    "C·∫£m nh·∫≠n s·ª± chuy·ªÉn ƒë·ªông c·ªßa c∆° th·ªÉ"
                ]
            },
            water: {
                title: "U·ªëng N∆∞·ªõc üíß",
                instructions: [
                    "U·ªëng m·ªôt c·ªëc n∆∞·ªõc l·ªõn t·ª´ t·ª´",
                    "C·∫£m nh·∫≠n v·ªã n∆∞·ªõc tr√™n l∆∞·ª°i",
                    "ƒÇn m·ªôt mi·∫øng tr√°i c√¢y ho·∫∑c h·∫°t",
                    "Ng·ªìi y√™n v√† th∆∞·ªüng th·ª©c",
                    "C·∫£m ∆°n c∆° th·ªÉ ƒë√£ ƒë∆∞·ª£c b·ªï sung nƒÉng l∆∞·ª£ng"
                ]
            },
            music: {
                title: "Nghe Nh·∫°c üéµ",
                instructions: [
                    "Ch·ªçn b√†i nh·∫°c y√™u th√≠ch",
                    "ƒê√≥ng m·∫Øt v√† l·∫Øng nghe",
                    "T·∫≠p trung v√†o giai ƒëi·ªáu",
                    "ƒê·ªÉ c∆° th·ªÉ chuy·ªÉn ƒë·ªông theo nh·∫°c",
                    "C·∫£m nh·∫≠n c·∫£m x√∫c m√† nh·∫°c mang l·∫°i"
                ]
            },
            tidy: {
                title: "D·ªçn D·∫πp üßπ",
                instructions: [
                    "Ch·ªçn m·ªôt khu v·ª±c nh·ªè ƒë·ªÉ d·ªçn",
                    "S·∫Øp x·∫øp nh·ªØng v·∫≠t d·ª•ng l·ªôn x·ªôn",
                    "Lau ch√πi b·ªÅ m·∫∑t b√†n l√†m vi·ªác",
                    "V·ª©t b·ªè nh·ªØng th·ª© kh√¥ng c·∫ßn thi·∫øt",
                    "C·∫£m nh·∫≠n s·ª± s·∫°ch s·∫Ω v√† g·ªçn g√†ng"
                ]
            },
            call: {
                title: "G·ªçi ƒêi·ªán üìû",
                instructions: [
                    "G·ªçi cho ng∆∞·ªùi th√¢n y√™u",
                    "H·ªèi thƒÉm s·ª©c kh·ªèe c·ªßa h·ªç",
                    "Chia s·∫ª m·ªôt ƒëi·ªÅu t·ªët ƒë·∫πp h√¥m nay",
                    "L·∫Øng nghe m·ªôt c√°ch ch√¢n th√†nh",
                    "N√≥i l·ªùi y√™u th∆∞∆°ng tr∆∞·ªõc khi k·∫øt th√∫c"
                ]
            }
        };

        let activityTimer;
        let activityTimeLeft;

        function startActivity(type) {
            const activity = activities[type];
            document.getElementById('activityTitle').textContent = activity.title;
            
            let instructionsHTML = '<ul style="text-align: left; color: #666; font-size: 14px; line-height: 1.6;">';
            activity.instructions.forEach(instruction => {
                instructionsHTML += `<li style="margin: 8px 0;">${instruction}</li>`;
            });
            instructionsHTML += '</ul>';
            
            document.getElementById('activityInstructions').innerHTML = instructionsHTML;
            document.getElementById('activityDetail').style.display = 'block';
            document.getElementById('activityTimer').textContent = '5:00';
            document.getElementById('activityBtn').textContent = 'B·∫Øt ƒê·∫ßu';
        }

        function startActivityTimer() {
            const btn = document.getElementById('activityBtn');
            if (btn.textContent === 'B·∫Øt ƒê·∫ßu') {
                activityTimeLeft = 300; // 5 minutes
                btn.textContent = 'D·ª´ng';
                runActivityTimer();
            } else {
                clearInterval(activityTimer);
                btn.textContent = 'B·∫Øt ƒê·∫ßu';
            }
        }

        function runActivityTimer() {
            activityTimer = setInterval(() => {
                activityTimeLeft--;
                const minutes = Math.floor(activityTimeLeft / 60);
                const seconds = activityTimeLeft % 60;
                document.getElementById('activityTimer').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (activityTimeLeft <= 0) {
                    clearInterval(activityTimer);
                    completeActivity();
                }
            }, 1000);
        }

        function completeActivity() {
            clearInterval(activityTimer);
            
            // Count completed activity
            appData.activitiesCompleted++;
            updateStats();
            
            const btn = document.getElementById('activityBtn');
            btn.textContent = '‚úÖ Ho√†n th√†nh!';
            btn.style.background = '#22c55e';
            
            setTimeout(() => {
                btn.textContent = 'B·∫Øt ƒê·∫ßu';
                btn.style.background = '';
                document.getElementById('activityDetail').style.display = 'none';
                showScreen('home');
            }, 2000);
        }

        // Mindfulness Mini
        const mindfulnessExercises = {
            breath: {
                title: "Quan S√°t H∆°i Th·ªü ü´Å",
                duration: 120,
                description: "T·∫≠p trung v√†o h∆°i th·ªü t·ª± nhi√™n ƒë·ªÉ l√†m d·ªãu t√¢m tr√≠ v√† gi·∫£m cƒÉng th·∫≥ng",
                benefits: [
                    "Gi·∫£m lo √¢u v√† stress ngay l·∫≠p t·ª©c",
                    "C·∫£i thi·ªán kh·∫£ nƒÉng t·∫≠p trung", 
                    "L√†m ch·∫≠m nh·ªãp tim, h·∫° huy·∫øt √°p",
                    "D·ªÖ l√†m, c√≥ th·ªÉ th·ª±c hi·ªán m·ªçi l√∫c m·ªçi n∆°i"
                ],
                guide: [
                    "Ng·ªìi tho·∫£i m√°i, l∆∞ng th·∫≥ng nh∆∞ng kh√¥ng c·ª©ng",
                    "ƒê√≥ng m·∫Øt nh·∫π nh√†ng ho·∫∑c nh√¨n xu·ªëng ƒë·∫•t", 
                    "Kh√¥ng c·ªë ƒëi·ªÅu khi·ªÉn h∆°i th·ªü, ƒë·ªÉ t·ª± nhi√™n",
                    "ƒê·∫øm t·ª´ 1-10 theo m·ªói nh·ªãp th·ªü ra",
                    "Khi t√¢m tr√≠ lang thang ‚Üí nh·∫π nh√†ng quay v·ªÅ ƒë·∫øm t·ª´ 1"
                ],
                instructions: [
                    "B·∫Øt ƒë·∫ßu quan s√°t h∆°i th·ªü t·ª± nhi√™n",
                    "C·∫£m nh·∫≠n kh√¥ng kh√≠ m√°t l·∫°nh khi h√≠t v√†o", 
                    "ƒê·ªÉ √Ω kh√¥ng kh√≠ ·∫•m khi th·ªü ra",
                    "ƒê·∫øm t·ª´ 1-10, b·∫Øt ƒë·∫ßu l·∫°i khi m·∫•t t·∫≠p trung",
                    "K·∫øt th√∫c b·∫±ng 3 h∆°i th·ªü s√¢u"
                ]
            },
            body: {
                title: "Qu√©t C∆° Th·ªÉ üßç",
                duration: 120,
                description: "C·∫£m nh·∫≠n t·ª´ng b·ªô ph·∫≠n c∆° th·ªÉ ƒë·ªÉ nh·∫≠n bi·∫øt cƒÉng th·∫≥ng v√† th·∫£ l·ªèng",
                benefits: [
                    "Ph√°t hi·ªán v√† gi·∫£m cƒÉng th·∫≥ng c∆° b·∫Øp",
                    "C·∫£i thi·ªán gi·∫•c ng·ªß, gi·∫£m ƒëau nh·ª©c",
                    "TƒÉng nh·∫≠n th·ª©c v·ªÅ c∆° th·ªÉ", 
                    "Gi√∫p th∆∞ gi√£n s√¢u v√† ph·ª•c h·ªìi nƒÉng l∆∞·ª£ng"
                ],
                guide: [
                    "N·∫±m ho·∫∑c ng·ªìi tho·∫£i m√°i, ƒë√≥ng m·∫Øt",
                    "B·∫Øt ƒë·∫ßu t·ª´ ƒë·ªânh ƒë·∫ßu, di chuy·ªÉn xu·ªëng t·ª´ng b·ªô ph·∫≠n",
                    "D√†nh 10-15 gi√¢y cho m·ªói v√πng c∆° th·ªÉ",
                    "Ch·ªâ quan s√°t, kh√¥ng c·ªë thay ƒë·ªïi c·∫£m gi√°c",
                    "N·∫øu th·∫•y cƒÉng th·∫≥ng ‚Üí h√≠t v√†o, th·ªü ra v√† th·∫£ l·ªèng"
                ],
                instructions: [
                    "B·∫Øt ƒë·∫ßu c·∫£m nh·∫≠n ƒë·ªânh ƒë·∫ßu v√† tr√°n",
                    "Di chuy·ªÉn xu·ªëng m·∫Øt, m√°, h√†m",
                    "C·∫£m nh·∫≠n c·ªï, vai v√† c√°nh tay", 
                    "Ch√∫ √Ω ƒë·∫øn ng·ª±c, b·ª•ng, l∆∞ng",
                    "K·∫øt th√∫c ·ªü ƒë√πi, ch√¢n v√† b√†n ch√¢n"
                ]
            },
            senses: {
                title: "K·ªπ Thu·∫≠t 5-4-3-2-1 üëÅÔ∏è",
                duration: 60,
                description: "S·ª≠ d·ª•ng 5 gi√°c quan ƒë·ªÉ neo t√¢m tr√≠ v√†o hi·ªán t·∫°i, ngƒÉn ch·∫∑n lo √¢u",
                benefits: [
                    "D·ª´ng c∆°n lo √¢u, ho·∫£ng lo·∫°n ngay l·∫≠p t·ª©c",
                    "ƒê∆∞a t√¢m tr√≠ v·ªÅ th·ª±c t·∫°i, tho√°t kh·ªèi suy nghƒ© ti√™u c·ª±c",
                    "TƒÉng c∆∞·ªùng s·ª± t·ªânh t√°o v√† t·∫≠p trung",
                    "R·∫•t h·ªØu √≠ch trong t√¨nh hu·ªëng stress cao"
                ],
                guide: [
                    "K·ªπ thu·∫≠t 'grounding' - neo t√¢m tr√≠ v√†o hi·ªán t·∫°i",
                    "L√†m t·ª´ t·ª´, t·∫≠p trung ho√†n to√†n v√†o t·ª´ng b∆∞·ªõc",
                    "N√≥i to ho·∫∑c th·∫ßm t√™n c·ªßa nh·ªØng g√¨ b·∫°n nh·∫≠n bi·∫øt",
                    "N·∫øu kh√¥ng ƒë·ªß (vd: ch·ªâ c√≥ 3 √¢m thanh) ‚Üí l·∫∑p l·∫°i", 
                    "M·ª•c ti√™u: chuy·ªÉn focus kh·ªèi lo √¢u v·ªÅ gi√°c quan"
                ],
                instructions: [
                    "T√¨m 5 th·ª© b·∫°n nh√¨n th·∫•y (m√†u s·∫Øc, h√¨nh d·∫°ng...)",
                    "Ch·∫°m 4 th·ª© kh√°c nhau (m·∫∑t b√†n, qu·∫ßn √°o...)",
                    "L·∫Øng nghe 3 √¢m thanh (m√°y l·∫°nh, xe c·ªô...)",
                    "Ng·ª≠i 2 m√πi h∆∞∆°ng (n∆∞·ªõc hoa, kh√¥ng kh√≠...)",
                    "N·∫øm 1 v·ªã trong mi·ªáng (n∆∞·ªõc b·ªçt, k·∫πo cao su...)"
                ]
            },
            gratitude: {
                title: "Bi·∫øt ∆†n üôè",
                duration: 60,
                description: "T·∫≠p trung v√†o nh·ªØng ƒëi·ªÅu t√≠ch c·ª±c ƒë·ªÉ c·∫£i thi·ªán t√¢m tr·∫°ng v√† quan ƒëi·ªÉm s·ªëng",
                benefits: [
                    "TƒÉng hormone h·∫°nh ph√∫c (serotonin, dopamine)",
                    "Gi·∫£m tr·∫ßm c·∫£m v√† tƒÉng l√≤ng bi·∫øt ∆°n",
                    "C·∫£i thi·ªán m·ªëi quan h·ªá v√† s·ª± l·∫°c quan",
                    "TƒÉng kh·∫£ nƒÉng ch·ªëng ch·ªçi v·ªõi stress"
                ],
                guide: [
                    "Kh√¥ng c·∫ßn nh·ªØng ƒëi·ªÅu to l·ªõn - ƒëi·ªÅu nh·ªè c≈©ng qu√Ω gi√°",
                    "C·∫£m nh·∫≠n th·ª±c s·ª±, kh√¥ng ch·ªâ nghƒ© su√¥ng",
                    "C√≥ th·ªÉ l√† ng∆∞·ªùi, s·ª± vi·ªác, hay ch√≠nh b·∫£n th√¢n",
                    "T·ª± h·ªèi 'ƒêi·ªÅu g√¨ l√†m cu·ªôc s·ªëng t√¥i d·ªÖ d√†ng h∆°n?'",
                    "K·∫øt th√∫c b·∫±ng l·ªùi c·∫£m ∆°n ƒë·∫øn ch√≠nh m√¨nh"
                ],
                instructions: [
                    "Nghƒ© v·ªÅ 1 ng∆∞·ªùi ƒë√£ gi√∫p ƒë·ª° b·∫°n g·∫ßn ƒë√¢y",
                    "Nh·ªõ l·∫°i 1 kho·∫£nh kh·∫Øc vui trong ng√†y",
                    "Bi·∫øt ∆°n c∆° th·ªÉ ƒë√£ ho·∫°t ƒë·ªông t·ªët", 
                    "C·∫£m ∆°n nh·ªØng ti·ªán nghi xung quanh (n∆∞·ªõc, ƒëi·ªán...)",
                    "G·ª≠i l·ªùi c·∫£m ∆°n ƒë·∫øn ch√≠nh b·∫°n v√¨ ƒë√£ chƒÉm s√≥c b·∫£n th√¢n"
                ]
            }
        };

        let mindfulnessTimer;
        let mindfulnessTimeLeft;
        let currentMindfulness;

        function startMindfulness(type) {
            currentMindfulness = mindfulnessExercises[type];
            
            // Show guide first
            document.getElementById('guideTitle').textContent = currentMindfulness.title;
            document.getElementById('guideDescription').textContent = currentMindfulness.description;
            
            // Populate benefits
            const benefitsList = document.getElementById('guideBenefits');
            benefitsList.innerHTML = '';
            currentMindfulness.benefits.forEach(benefit => {
                const li = document.createElement('li');
                li.textContent = benefit;
                benefitsList.appendChild(li);
            });
            
            // Populate guide steps
            const stepsList = document.getElementById('guideSteps');
            stepsList.innerHTML = '';
            currentMindfulness.guide.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                stepsList.appendChild(li);
            });
            
            // Show the practice screen
            document.getElementById('mindfulnessPractice').style.display = 'block';
            document.getElementById('mindfulnessGuide').style.display = 'block';
            document.getElementById('mindfulnessSession').style.display = 'none';
        }

        function startMindfulnessPractice() {
            // Setup session screen
            document.getElementById('sessionTitle').textContent = currentMindfulness.title;
            
            const minutes = Math.floor(currentMindfulness.duration / 60);
            const seconds = currentMindfulness.duration % 60;
            document.getElementById('mindfulnessTimer').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('mindfulnessInstruction').textContent = 
                currentMindfulness.instructions[0];
            
            // Switch to session view
            document.getElementById('mindfulnessGuide').style.display = 'none';
            document.getElementById('mindfulnessSession').style.display = 'block';
            document.getElementById('mindfulnessBtn').textContent = 'B·∫Øt ƒê·∫ßu';
        }

        function backToMindfulnessMenu() {
            document.getElementById('mindfulnessPractice').style.display = 'none';
        }

        function startMindfulnessTimer() {
            const btn = document.getElementById('mindfulnessBtn');
            const circle = document.getElementById('mindfulnessCircle');
            
            if (btn.textContent === 'B·∫Øt ƒê·∫ßu') {
                mindfulnessTimeLeft = currentMindfulness.duration;
                btn.textContent = 'D·ª´ng';
                circle.classList.add('active');
                runMindfulnessTimer();
            } else {
                clearInterval(mindfulnessTimer);
                btn.textContent = 'B·∫Øt ƒê·∫ßu';
                circle.classList.remove('active');
            }
        }

        function runMindfulnessTimer() {
            let instructionIndex = 0;
            const instructionInterval = Math.floor(currentMindfulness.duration / currentMindfulness.instructions.length);
            
            mindfulnessTimer = setInterval(() => {
                mindfulnessTimeLeft--;
                const minutes = Math.floor(mindfulnessTimeLeft / 60);
                const seconds = mindfulnessTimeLeft % 60;
                document.getElementById('mindfulnessTimer').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // Change instruction
                const elapsed = currentMindfulness.duration - mindfulnessTimeLeft;
                const newInstructionIndex = Math.floor(elapsed / instructionInterval);
                if (newInstructionIndex < currentMindfulness.instructions.length && newInstructionIndex !== instructionIndex) {
                    instructionIndex = newInstructionIndex;
                    document.getElementById('mindfulnessInstruction').textContent = 
                        currentMindfulness.instructions[instructionIndex];
                }
                
                if (mindfulnessTimeLeft <= 0) {
                    clearInterval(mindfulnessTimer);
                    endMindfulness();
                }
            }, 1000);
        }

        function endMindfulness() {
            clearInterval(mindfulnessTimer);
            
            // Count completed mindfulness session
            appData.mindfulnessCompleted++;
            updateStats();
            
            const btn = document.getElementById('mindfulnessBtn');
            const circle = document.getElementById('mindfulnessCircle');
            
            btn.textContent = '‚úÖ Ho√†n th√†nh!';
            btn.style.background = '#22c55e';
            circle.classList.remove('active');
            
            document.getElementById('mindfulnessInstruction').textContent = 
                'Tuy·ªát v·ªùi! B·∫°n ƒë√£ ho√†n th√†nh b√†i t·∫≠p ch√°nh ni·ªám.';
            
            setTimeout(() => {
                btn.textContent = 'B·∫Øt ƒê·∫ßu';
                btn.style.background = '';
                document.getElementById('mindfulnessPractice').style.display = 'none';
                document.getElementById('mindfulnessGuide').style.display = 'block';
                document.getElementById('mindfulnessSession').style.display = 'none';
                showScreen('home');
            }, 3000);
        }
        // H√†m t√≠nh √¢m l·ªãch ƒë∆°n gi·∫£n

        function updateDateDisplay() {
            const now = new Date();
            const days = ["Ch·ªß nh·∫≠t", "Th·ª© hai", "Th·ª© ba", "Th·ª© t∆∞", "Th·ª© nƒÉm", "Th·ª© s√°u", "Th·ª© b·∫£y"];
            
            // D∆∞∆°ng l·ªãch
            const dayName = days[now.getDay()];
            const date = now.getDate();
            const month = now.getMonth() + 1;
            const year = now.getFullYear();
            const solarDate = `${dayName}, ${date}/${month}/${year}`;
            
            // √Çm l·ªãch s·ª≠ d·ª•ng th∆∞ vi·ªán
            try {
                const solar = Lunar.Solar.fromDate(now);
                const lunar = solar.getLunar();
                const lunarDate = `${lunar.getDay()} th√°ng ${lunar.getMonthInChinese()} ${lunar.getYear()}`;
                
                document.getElementById('solarDate').textContent = solarDate;
                document.getElementById('lunarDate').textContent = `üåô ${lunarDate}`;
            } catch (error) {
                // Fallback n·∫øu th∆∞ vi·ªán l·ªói
                document.getElementById('solarDate').textContent = solarDate;
                document.getElementById('lunarDate').textContent = `üåô √Çm l·ªãch kh√¥ng kh·∫£ d·ª•ng`;
            }
        }
        // Initialize app on page load so solar & lunar dates render
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                try { loadData(); } catch (e) { console.error('Init error:', e); }
            });
        } else {
            try { loadData(); } catch (e) { console.error('Init error:', e); }
        }
        // Simple service worker for offline functionality
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:application/javascript,console.log("SW registered");');
        }
    </script>
</body>
</html>